---
title: ElasticStack을 이용한 분석
layout: single
author_profile: true
read_time: true
comments: true
share: true
related: true
categories:
- Elastic
toc: true
toc_sticky: true
toc_label: 목차
---
## DataSet : 고용노동부_워크넷구인구직취업동향 (201201~202011)

POST _bulk
{ "index" : {"_index":"worknet","_id":"1"} }
{"년월": 201201,"구인인원": "131,160","구직자수": "235,809","취업건수": "44,235"}
{ "index" : {"_index":"worknet","_id":"2"} }
{"년월": 201202,"구인인원": "156,599","구직자수": "216,700","취업건수": "55,254"}
{ "index" : {"_index":"worknet","_id":"3"} }
{"년월": 201203,"구인인원": "162,462","구직자수": "235,159","취업건수": "78,244"}
{ "index" : {"_index":"worknet","_id":"4"} }
{"년월": 201204,"구인인원": "150,327","구직자수": "212,236","취업건수": "65,454"}
{ "index" : {"_index":"worknet","_id":"5"} }
{"년월": 201205,"구인인원": "162,145","구직자수": "208,007","취업건수": "62,719"}
{ "index" : {"_index":"worknet","_id":"6"} }
{"년월": 201206,"구인인원": "147,424","구직자수": "200,864","취업건수": "59,898"}
{ "index" : {"_index":"worknet","_id":"7"} }
{"년월": 201207,"구인인원": "143,874","구직자수": "205,117","취업건수": "63,462"}
{ "index" : {"_index":"worknet","_id":"8"} }
{"년월": 201208,"구인인원": "152,785","구직자수": "196,239","취업건수": "59,921"}
{ "index" : {"_index":"worknet","_id":"9"} }
{"년월": 201209,"구인인원": "135,059","구직자수": "193,947","취업건수": "62,024"}
{ "index" : {"_index":"worknet","_id":"10"} }
{"년월": 201210,"구인인원": "167,811","구직자수": "211,607","취업건수": "61,602"}
{ "index" : {"_index":"worknet","_id":"11"} }
{"년월": 201211,"구인인원": "151,054","구직자수": "201,451","취업건수": "69,883"}
{ "index" : {"_index":"worknet","_id":"12"} }
{"년월": 201212,"구인인원": "117,819","구직자수": "200,379","취업건수": "49,055"}
{ "index" : {"_index":"worknet","_id":"13"} }
{"년월": 201301,"구인인원": "162,117","구직자수": "296,229","취업건수": "61,087"}
{ "index" : {"_index":"worknet","_id":"14"} }
{"년월": 201302,"구인인원": "132,412","구직자수": "208,092","취업건수": "62,189"}
{ "index" : {"_index":"worknet","_id":"15"} }
{"년월": 201303,"구인인원": "170,643","구직자수": "262,641","취업건수": "90,131"}
{ "index" : {"_index":"worknet","_id":"16"} }
{"년월": 201304,"구인인원": "152,811","구직자수": "248,947","취업건수": "84,003"}
{ "index" : {"_index":"worknet","_id":"17"} }
{"년월": 201305,"구인인원": "151,908","구직자수": "225,803","취업건수": "73,950"}
{ "index" : {"_index":"worknet","_id":"18"} }
{"년월": 201306,"구인인원": "148,405","구직자수": "215,926","취업건수": "65,045"}
{ "index" : {"_index":"worknet","_id":"19"} }
{"년월": 201307,"구인인원": "138,815","구직자수": "266,551","취업건수": "76,164"}
{ "index" : {"_index":"worknet","_id":"20"} }
{"년월": 201308,"구인인원": "146,911","구직자수": "224,526","취업건수": "67,208"}
{ "index" : {"_index":"worknet","_id":"21"} }
{"년월": 201309,"구인인원": "140,100","구직자수": "220,526","취업건수": "65,996"}
{ "index" : {"_index":"worknet","_id":"22"} }
{"년월": 201310,"구인인원": "150,502","구직자수": "252,886","취업건수": "73,348"}
{ "index" : {"_index":"worknet","_id":"23"} }
{"년월": 201311,"구인인원": "134,893","구직자수": "208,348","취업건수": "71,589"}
{ "index" : {"_index":"worknet","_id":"24"} }
{"년월": 201312,"구인인원": "133,342","구직자수": "250,188","취업건수": "62,652"}
{ "index" : {"_index":"worknet","_id":"25"} }
{"년월": 201401,"구인인원": "136,730","구직자수": "299,955","취업건수": "61,877"}
{ "index" : {"_index":"worknet","_id":"26"} }
{"년월": 201402,"구인인원": "145,527","구직자수": "239,384","취업건수": "69,886"}
{ "index" : {"_index":"worknet","_id":"27"} }
{"년월": 201403,"구인인원": "150,454","구직자수": "266,707","취업건수": "98,826"}
{ "index" : {"_index":"worknet","_id":"28"} }
{"년월": 201404,"구인인원": "170,488","구직자수": "248,717","취업건수": "85,685"}
{ "index" : {"_index":"worknet","_id":"29"} }
{"년월": 201405,"구인인원": "130,924","구직자수": "225,168","취업건수": "72,371"}
{ "index" : {"_index":"worknet","_id":"30"} }
{"년월": 201406,"구인인원": "132,254","구직자수": "234,648","취업건수": "69,784"}
{ "index" : {"_index":"worknet","_id":"31"} }
{"년월": 201407,"구인인원": "137,852","구직자수": "272,245","취업건수": "77,872"}
{ "index" : {"_index":"worknet","_id":"32"} }
{"년월": 201408,"구인인원": "137,517","구직자수": "217,152","취업건수": "66,276"}
{ "index" : {"_index":"worknet","_id":"33"} }
{"년월": 201409,"구인인원": "137,728","구직자수": "225,426","취업건수": "66,737"}
{ "index" : {"_index":"worknet","_id":"34"} }
{"년월": 201410,"구인인원": "141,581","구직자수": "245,293","취업건수": "75,556"}
{ "index" : {"_index":"worknet","_id":"35"} }
{"년월": 201411,"구인인원": "126,783","구직자수": "224,073","취업건수": "63,943"}
{ "index" : {"_index":"worknet","_id":"36"} }
{"년월": 201412,"구인인원": "147,873","구직자수": "235,098","취업건수": "61,100"}
{ "index" : {"_index":"worknet","_id":"37"} }
{"년월": 201501,"구인인원": "137,464","구직자수": "323,548","취업건수": "76,535"}
{ "index" : {"_index":"worknet","_id":"38"} }
{"년월": 201502,"구인인원": "108,653","구직자수": "219,592","취업건수": "63,735"}
{ "index" : {"_index":"worknet","_id":"39"} }
{"년월": 201503,"구인인원": "183,479","구직자수": "284,766","취업건수": "99,716"}
{ "index" : {"_index":"worknet","_id":"40"} }
{"년월": 201504,"구인인원": "138,335","구직자수": "260,023","취업건수": "88,414"}
{ "index" : {"_index":"worknet","_id":"41"} }
{"년월": 201505,"구인인원": "122,386","구직자수": "219,804","취업건수": "70,033"}
{ "index" : {"_index":"worknet","_id":"42"} }
{"년월": 201506,"구인인원": "150,426","구직자수": "245,213","취업건수": "77,943"}
{ "index" : {"_index":"worknet","_id":"43"} }
{"년월": 201507,"구인인원": "127,293","구직자수": "283,965","취업건수": "76,997"}
{ "index" : {"_index":"worknet","_id":"44"} }
{"년월": 201508,"구인인원": "134,096","구직자수": "217,781","취업건수": "66,270"}
{ "index" : {"_index":"worknet","_id":"45"} }
{"년월": 201509,"구인인원": "135,974","구직자수": "227,142","취업건수": "71,466"}
{ "index" : {"_index":"worknet","_id":"46"} }
{"년월": 201510,"구인인원": "147,264","구직자수": "250,155","취업건수": "71,964"}
{ "index" : {"_index":"worknet","_id":"47"} }
{"년월": 201511,"구인인원": "132,268","구직자수": "218,446","취업건수": "71,039"}
{ "index" : {"_index":"worknet","_id":"48"} }
{"년월": 201512,"구인인원": "152,070","구직자수": "246,086","취업건수": "63,112"}
{ "index" : {"_index":"worknet","_id":"49"} }
{"년월": 201601,"구인인원": "131,893","구직자수": "309,475","취업건수": "68,507"}
{ "index" : {"_index":"worknet","_id":"50"} }
{"년월": 201602,"구인인원": "127,317","구직자수": "225,314","취업건수": "64,521"}
{ "index" : {"_index":"worknet","_id":"51"} }
{"년월": 201603,"구인인원": "180,460","구직자수": "292,730","취업건수": "95,636"}
{ "index" : {"_index":"worknet","_id":"52"} }
{"년월": 201604,"구인인원": "134,727","구직자수": "233,340","취업건수": "78,295"}
{ "index" : {"_index":"worknet","_id":"53"} }
{"년월": 201605,"구인인원": "133,845","구직자수": "213,774","취업건수": "69,665"}
{ "index" : {"_index":"worknet","_id":"54"} }
{"년월": 201606,"구인인원": "151,907","구직자수": "231,129","취업건수": "68,926"}
{ "index" : {"_index":"worknet","_id":"55"} }
{"년월": 201607,"구인인원": "129,203","구직자수": "239,837","취업건수": "69,235"}
{ "index" : {"_index":"worknet","_id":"56"} }
{"년월": 201608,"구인인원": "148,535","구직자수": "212,162","취업건수": "61,856"}
{ "index" : {"_index":"worknet","_id":"57"} }
{"년월": 201609,"구인인원": "147,425","구직자수": "202,963","취업건수": "61,739"}
{ "index" : {"_index":"worknet","_id":"58"} }
{"년월": 201610,"구인인원": "146,518","구직자수": "207,056","취업건수": "65,313"}
{ "index" : {"_index":"worknet","_id":"59"} }
{"년월": 201611,"구인인원": "140,573","구직자수": "204,662","취업건수": "65,896"}
{ "index" : {"_index":"worknet","_id":"60"} }
{"년월": 201612,"구인인원": "164,990","구직자수": "206,901","취업건수": "58,909"}
{ "index" : {"_index":"worknet","_id":"61"} }
{"년월": 201701,"구인인원": "135,596","구직자수": "254,381","취업건수": "58,156"}
{ "index" : {"_index":"worknet","_id":"62"} }
{"년월": 201702,"구인인원": "154,097","구직자수": "209,136","취업건수": "364,563"}
{ "index" : {"_index":"worknet","_id":"63"} }
{"년월": 201703,"구인인원": "190,803","구직자수": "251,660","취업건수": "85,585"}
{ "index" : {"_index":"worknet","_id":"64"} }
{"년월": 201704,"구인인원": "143,058","구직자수": "220,370","취업건수": "68,357"}
{ "index" : {"_index":"worknet","_id":"65"} }
{"년월": 201705,"구인인원": "146,198","구직자수": "219,211","취업건수": "57,233"}
{ "index" : {"_index":"worknet","_id":"66"} }
{"년월": 201706,"구인인원": "167,787","구직자수": "231,035","취업건수": "61,025"}
{ "index" : {"_index":"worknet","_id":"67"} }
{"년월": 201707,"구인인원": "136,595","구직자수": "229,101","취업건수": "59,604"}
{ "index" : {"_index":"worknet","_id":"68"} }
{"년월": 201708,"구인인원": "145,625","구직자수": "215,181","취업건수": "54,438"}
{ "index" : {"_index":"worknet","_id":"69"} }
{"년월": 201709,"구인인원": "140,862","구직자수": "213,663","취업건수": "61,918"}
{ "index" : {"_index":"worknet","_id":"70"} }
{"년월": 201710,"구인인원": "123,499","구직자수": "191,269","취업건수": "43,716"}
{ "index" : {"_index":"worknet","_id":"71"} }
{"년월": 201711,"구인인원": "133,954","구직자수": "221,656","취업건수": "59,057"}
{ "index" : {"_index":"worknet","_id":"72"} }
{"년월": 201712,"구인인원": "129,394","구직자수": "213,616","취업건수": "50,705"}
{ "index" : {"_index":"worknet","_id":"73"} }
{"년월": 201801,"구인인원": "152,123","구직자수": "280,686","취업건수": "60,377"}
{ "index" : {"_index":"worknet","_id":"74"} }
{"년월": 201802,"구인인원": "111,514","구직자수": "201,970","취업건수": "51,090"}
{ "index" : {"_index":"worknet","_id":"75"} }
{"년월": 201803,"구인인원": "161,055","구직자수": "268,960","취업건수": "75,124"}
{ "index" : {"_index":"worknet","_id":"76"} }
{"년월": 201804,"구인인원": "132,298","구직자수": "228,857","취업건수": "67,013"}
{ "index" : {"_index":"worknet","_id":"77"} }
{"년월": 201805,"구인인원": "130,283","구직자수": "218,862","취업건수": "58,237"}
{ "index" : {"_index":"worknet","_id":"78"} }
{"년월": 201806,"구인인원": "139,032","구직자수": "219,093","취업건수": "56,985"}
{ "index" : {"_index":"worknet","_id":"79"} }
{"년월": 201807,"구인인원": "128,378","구직자수": "236,747","취업건수": "59,263"}
{ "index" : {"_index":"worknet","_id":"80"} }
{"년월": 201808,"구인인원": "132,207","구직자수": "214,040","취업건수": "53,622"}
{ "index" : {"_index":"worknet","_id":"81"} }
{"년월": 201809,"구인인원": "110,239","구직자수": "186,805","취업건수": "52,009"}
{ "index" : {"_index":"worknet","_id":"82"} }
{"년월": 201810,"구인인원": "132,783","구직자수": "227,062","취업건수": "53,698"}
{ "index" : {"_index":"worknet","_id":"83"} }
{"년월": 201811,"구인인원": "118,054","구직자수": "204,786","취업건수": "56,837"}
{ "index" : {"_index":"worknet","_id":"84"} }
{"년월": 201812,"구인인원": "114,236","구직자수": "203,032","취업건수": "47,332"}
{ "index" : {"_index":"worknet","_id":"85"} }
{"년월": 201901,"구인인원": "117,502","구직자수": "305,090","취업건수": "61,668"}
{ "index" : {"_index":"worknet","_id":"86"} }
{"년월": 201902,"구인인원": "103,058","구직자수": "208,145","취업건수": "48,615"}
{ "index" : {"_index":"worknet","_id":"87"} }
{"년월": 201903,"구인인원": "126,983","구직자수": "262,698","취업건수": "76,831"}
{ "index" : {"_index":"worknet","_id":"88"} }
{"년월": 201904,"구인인원": "120,337","구직자수": "240,592","취업건수": "67,359"}
{ "index" : {"_index":"worknet","_id":"89"} }
{"년월": 201905,"구인인원": "113,868","구직자수": "217,896","취업건수": "60,065"}
{ "index" : {"_index":"worknet","_id":"90"} }
{"년월": 201906,"구인인원": "110,306","구직자수": "219,205","취업건수": "55,513"}
{ "index" : {"_index":"worknet","_id":"91"} }
{"년월": 201907,"구인인원": "112,095","구직자수": "248,714","취업건수": "62,550"}
{ "index" : {"_index":"worknet","_id":"92"} }
{"년월": 201908,"구인인원": "103,620","구직자수": "207,994","취업건수": "53,895"}
{ "index" : {"_index":"worknet","_id":"93"} }
{"년월": 201909,"구인인원": "112,073","구직자수": "205,496","취업건수": "51,702"}
{ "index" : {"_index":"worknet","_id":"94"} }
{"년월": 201910,"구인인원": "110,837","구직자수": "229,847","취업건수": "58,370"}
{ "index" : {"_index":"worknet","_id":"95"} }
{"년월": 201911,"구인인원": "109,407","구직자수": "216,152","취업건수": "54,908"}
{ "index" : {"_index":"worknet","_id":"96"} }
{"년월": 201912,"구인인원": "111,859","구직자수": "225,596","취업건수": "47,806"}
{ "index" : {"_index":"worknet","_id":"97"} }
{"년월": 202001,"구인인원": "109,209","구직자수": "302,518","취업건수": "55,405"}
{ "index" : {"_index":"worknet","_id":"98"} }
{"년월": 202002,"구인인원": "112,935","구직자수": "244,566","취업건수": "60,175"}
{ "index" : {"_index":"worknet","_id":"99"} }
{"년월": 202003,"구인인원": "97,697","구직자수": "292,051","취업건수": "64,645"}
{ "index" : {"_index":"worknet","_id":"100"} }
{"년월": 202004,"구인인원": "78,549","구직자수": "266,717","취업건수": "56,940"}
{ "index" : {"_index":"worknet","_id":"101"} }
{"년월": 202005,"구인인원": "91,327","구직자수": "246,940","취업건수": "49,683"}
{ "index" : {"_index":"worknet","_id":"102"} }
{"년월": 202006,"구인인원": "105,420","구직자수": "265,444","취업건수": "54,409"}
{ "index" : {"_index":"worknet","_id":"103"} }
{"년월": 202007,"구인인원": "104,692","구직자수": "276,503","취업건수": "58,910"}
{ "index" : {"_index":"worknet","_id":"104"} }
{"년월": 202008,"구인인원": "115,148","구직자수": "246,007","취업건수": "59,530"}
{ "index" : {"_index":"worknet","_id":"105"} }
{"년월": 202009,"구인인원": "109,750","구직자수": "271,245","취업건수": "66,022"}
{ "index" : {"_index":"worknet","_id":"106"} }
{"년월": 202010,"구인인원": "120,276","구직자수": "284,991","취업건수": "60,737"}
{ "index" : {"_index":"worknet","_id":"107"} }
{"년월": 202011,"구인인원": "125,697","구직자수": "245,001","취업건수": "66,511"}

## 202010~202011 구직인원,구직자수, 취업건수 조사
GET worknet/_doc/106
GET worknet/_doc/107

## 데이터 검색 : 총 107건
GET worknet/_search
{
  "query": {
    "match_all": {}
  }
}


## 데이터 전체 검색
GET worknet
GET worknet/_search



## pink와 "red blue" 구문 둘다 포함된 모든  doc 검색
## AND 와 동일 
GET worknet/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "년월" : "202011"
          }
        }
      ]
    }
  }
}


## 구직인원 78,549명에 대한 년월 검색
GET worknet/_search
{
  "query": {
    "match": {
      "구인인원": "78,549"
    }
  }
}


## 취업건수가 90000이상 검색
GET worknet/_search
{
  "query": {
    "range": {
      "취업건수": {
        "gte": 90000
      }
    }
  }
}




## range query
## 구직자수 25만명 이상 35만명 이하 검색
GET worknet/_search
{
  "query": {
    "range": {
      "구직자수": {
        "gte": 250000,
        "lte": 350000
      }
    }
  }
}
--------------------------------------------
## DataSet : William Shakespeare의 전집(shakespeare_6.0.json)

## 데이터 검색 : 총 10000건
GET shakespeare/_search
{
  "query": {
    "match_all": {}
  }
}


## slop : query에 제시된 term 사이에 특정 term 수 표현
GET shakespeare/_search
{
  "query": {
    "match_phrase": {
      "speaker": {
        "query": "KING IV",
        "slop": 1
      }
    }
  }
}



## Bool 복합 쿼리 
## 여러 조건을 조합하기에 용이
## must : 검색 결과가 참인 검색
## must_not : 검색 결과가 거짓인 검색 
GET shakespeare/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "text_entry": "Welshwomen"
          }
        }
      ]
    }
  }
}


## term은 소문자로만 검색 가능 , 띄어쓰기는 취급 안함
## 딱 맞게, 정확하게 찾고 싶으면 term 사용 , score 취급 안해서 빠름


GET shakespeare/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "speaker": "WESTMORELAND"
          }
        }
      ]
    }
  }
}


## speaker field만 검색
GET shakespeare/_search
{
  "_source": "speaker"
}

## speech_number에서 null이 아닌 것들 검색
GET shakespeare/_search
{
  "_source": "speech_number",
  "query": {
    "exists": {
      "field": "speech_number"
    }
  }
}









